<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ—Ä–µ–π—Å–∫–∞—è –∫—É—Ö–Ω—è | Kore√´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,500,400&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: #f5f3ee;
      font-family: 'Montserrat', Arial, sans-serif;
      color: #222;
    }
    .layout { display: flex;
       min-height: 100vh;
        width: 100vw; 
        box-sizing: border-box; }
    .sidebar {
  position: fixed;
  top: 0;
  left: -30px;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  width: 230px;
  background: var(--sidebar-bg);
  padding: 30px 0 0 36px;
  min-width: 190px;
  border-right: 1px solid #edeae2;
  z-index: 10;
}
.theme-toggle-wrap {
  display: flex;
  justify-content: flex-start;
  margin-bottom: 25px;
  margin-right: 0;
  margin-left: 0;
  padding-left: 0;
}


.center {
  margin-left: 230px;
  padding: 0 30px;
  /* –æ—Å—Ç–∞–ª—å–Ω–æ–µ... */
}

    
    .menu-title { font-size: 1.1em;
       font-weight: bold; 
       margin-bottom: 8px; 
       margin-left: 2px;
        color: #363636; }
    .menu-btn {
      background: none;
       border: none; font: inherit; 
       font-size: 1.05em; color: #222;
      text-align: left;
       border-radius: 9px;
       padding: 7px 14px; 
      cursor: pointer;
      transition: background .14s, color .14s;
       width: 85%;
    }
    .menu-btn.active, .menu-btn:hover { background: #fff; color: #d17c13; font-weight: bold; }
    .center { flex: 1;
       display: flex;
        flex-direction: column;
         padding: 0 30px; }
    .banner {
      width: 100%; max-width: 1500px; 
      height: 260px;
      margin: 32px auto 24px auto;
       border-radius: 36px 80px 36px 36px;
      overflow: hidden;
       position: relative; 
       background: #eee;
      box-shadow: 0 4px 24px #b9bab933; 
      display: flex;
       align-items: flex-end;
    }
    .banner img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .banner-content { position: absolute;
       left: 40px;
        bottom: 40px; 
        color: #fff; }
    .banner-title { font-size: 2.3em;
       font-weight: 700;
        margin-bottom: 20px;
         letter-spacing: .03em;
          text-shadow: 0 2px 16px #0007; }
    .section-title { font-size: 1.5em;
       font-weight: 700; 
       margin-bottom: 20px; 
       margin-top: 16px;
        color: #222; }
    .dishes { display: flex;
       flex-wrap: wrap; gap: 28px;
        margin-bottom: 30px; }
    .dish-card {
      background: #fff; border-radius: 18px;
       width: 210px; 
       box-shadow: 0 2px 18px #b9bab933;
      padding: 0 0 18px 0; overflow: hidden;
       transition: box-shadow .15s, transform .12s;
      display: flex; 
      flex-direction: column;
       align-items: flex-start;
    }
    .dish-card:hover { box-shadow: 0 8px 32px #b9bab988;
       transform: translateY(-4px) scale(1.025); }
    .dish-img { width: 100%;
       height: 128px;
        object-fit: cover;
         border-top-left-radius: 18px;
          border-top-right-radius: 18px; }
    .dish-content { padding: 14px 14px 0 14px;
       flex: 1;
        width: 100%;
         display: flex;
          flex-direction: column;
           align-items: flex-start; }
    .dish-price { font-weight: 700; 
      font-size: 1.18em;
       margin-bottom: 7px; }
    .dish-title { font-weight: 600;
       font-size: 1.03em;
        margin-bottom: 7px;
         overflow: hidden;
          white-space: nowrap; 
          text-overflow: ellipsis;
           width: 100%; }
    .dish-desc { color: #444;
       font-size: .98em;
        margin-bottom: 8px; 
        height: 2.5em;
         overflow: hidden; }
    .dish-weight { color: #b3a9a1;
       font-size: .95em; 
       margin-bottom: 9px; }
    .add-btn {
      background: #f7f7f7;
       color: #333;
        font-weight: 500;
         border: none;
          border-radius: 10px;
      padding: 9px 0;
       font-size: 1em;
        width: 90%; 
        cursor: pointer;
         box-shadow: 0 1px 7px #0001;
      transition: background .18s,
       color .18s;
        margin-left: 5%;
         display: flex; 
         align-items: center;
          justify-content: center;
           gap: 7px;
    }
    .add-btn:hover { background: #ffe7c2; color: #db780a; }
    .cart {
      width: 290px;
       min-width: 230px;
        background: #fff; 
        padding: 36px 28px 24px 28px;
      border-radius: 26px;
       margin: 18px 14px 18px 0;
        box-shadow: 0 2px 18px #b9bab933;
      display: flex;
       flex-direction: column; 
       align-items: center;
        height: fit-content;
         position: sticky;
          top: 18px;
    }
    .cart-title { font-size: 1.2em; 
      font-weight: bold;
       margin-bottom: 26px;
        color: #222;
         text-align: left;
          width: 100%; }
    .cart-empty { text-align: center;
       color: #aaa;
        margin-top: 30px; 
        font-size: 1.08em; }
    .cart-empty-img { width: 60px;
       margin-bottom: 8px;
        opacity: 0.6; }
    .cart-items { width: 100%;
       margin-bottom: 18px; }
    .cart-item {
      display: flex; 
      justify-content: space-between; 
      align-items: center;
       background: #f6f6f3;
      border-radius: 8px;
       padding: 7px 11px;
        margin-bottom: 7px;
    }
    .cart-item-title { font-size: .97em;
       max-width: 110px; 
       overflow: hidden; 
       text-overflow: ellipsis;
        white-space: nowrap; }
    .cart-item-qty { width: 24px;
       text-align: center; 
       font-size: 1.02em; }
    .cart-total { margin-top: 10px;
       font-weight: bold;
        font-size: 1.13em;
         text-align: right; 
         width: 100%; }
    .order-btn {
      margin-top: 20px; 
      width: 100%;
       padding: 13px 0;
      background: linear-gradient(90deg, #ffcc80, #ffb74d); color: #222; 
      font-weight: 
      bold; font-size: 1.07em;
      border: none; 
      border-radius: 11px;
       box-shadow: 0 1px 10px #0002;
        cursor: pointer;
         transition: background 0.15s, color 0.15s, transform 0.1s; letter-spacing: .01em;
    }
    .order-btn:hover, .order-btn:focus { background: linear-gradient(90deg, #ffb74d, #ffcc80); 
      color: #d17c13;
       transform: translateY(-2px) scale(1.02); }
    .order-modal {
      display: none;
       position: fixed; 
       z-index: 999; left: 0;
        top: 0;
         right: 0; 
         bottom: 0;
      background: rgba(0,0,0,0.55); justify-content: center; align-items: center;
    }
    .order-form {
      background: #232323;
       border-radius: 14px;
        padding: 32px 24px 24px 24px;
         width: 350px;
      display: flex;
       flex-direction: column; 
       gap: 18px;
        box-shadow: 0 4px 30px #0004;
    }
    .order-title { font-size: 22px; 
      margin-bottom: 6px;
       color: #fff; 
       text-align: center; 
       font-weight: 700; }
    .order-form input {
      background: #15151b;
       border: 1px solid #3b3b3b;
        border-radius: 7px;
         color: #fff; 
         padding: 10px 12px;
      font-size: 16px;
       outline: none;
    }
    .order-form button {
      background: #51ff00; color: #fff; border: none; padding: 12px; border-radius: 7px;
      font-size:
       17px; cursor: pointer; 
       margin-top: 6px; 
       font-weight: 600; 
       transition: 0.2s;
    }
    .order-form .close-modal-btn {
      background: none; 
      color: #ff0000; 
      border: 1px solid #970404; margin-top: 0;
    }
    @media (max-width: 1100px) {
      .sidebar {width: 120px; min-width: 80px; padding-left: 8px;}
      .center {padding: 0 10px;}
      .cart {width: 170px; min-width: 120px;}
      .dish-card {width: 140px;}
      .banner-content {left: 18px;}
    }
    @media (max-width: 900px) {
      .layout {flex-direction: column;}
      .sidebar, .cart {position: static; width: 100vw; min-width: unset; border-radius: 0; box-shadow: none; margin: 0;}
      .center {padding: 0;}
    }
    /* –æ–±—â–∞—è –æ–±—ë—Ä—Ç–∫–∞ –º–æ–¥–∞–ª–∫–∏ */
.modal {
  display: none;
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
}

/* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª–∫–∏ */
.modal-content {
  background: #fff;
  padding: 24px;
  border-radius: 12px;
  width: 320px;
  position: relative;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}

/* –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è */
.modal-close {
  position: absolute;
  top:8px; right:12px;
  font-size: 24px;
  cursor: pointer;
}

/* —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º */
.auth-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.auth-form h2 {
  margin: 0 0 12px;
}
.auth-form input,
.auth-form button {
  padding: 8px 12px;
  font-size: 1em;
  border: 1px solid #ccc;
  border-radius: 6px;
}
.auth-form button {
  cursor: pointer;
  background: #ffcc80;
  border: none;
}
.auth-form p {
  font-size: .9em;
  text-align: center;
}
.auth-form a {
  color: #d17c13;
  text-decoration: none;
}
.profile-btn {
  width: 100%;
  padding: 9px 12px;
  font-size: 1em;
  border: none;
  border-radius: 10px;
  background: #f7f7f7;       /* —Ç–æ—Ç –∂–µ —Ñ–æ–Ω, —á—Ç–æ —É .add-btn */
  color: #333;               /* –∏–ª–∏ #222 ‚Äî –∫–∞–∫ —É –≤–∞—à–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  box-shadow: 0 1px 7px rgba(0,0,0,0.1);
  transition: background .18s, color .18s;
}

.profile-btn:hover {
  background: #ffe7c2;       /* –∫–∞–∫ –¥–ª—è .add-btn:hover */
  color: #db780a;
}
.profile-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  /* —É–±–∏—Ä–∞–µ–º left: 50%; transform */
  width: 100%; /* –¥–µ–ª–∞–µ–º —à–∏—Ä–∏–Ω—É —Ç–∞–∫—É—é –∂–µ, –∫–∞–∫ —É –ø—Ä–æ—Ñ–∏–ª—è */
  min-width: 100%; /* –º–∏–Ω–∏–º–∞–ª—å–Ω–æ ‚Äî –∫–∞–∫ —É –∫–Ω–æ–ø–∫–∏ */
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 4px 16px #b9bab944;
  z-index: 10;
  display: flex;
  flex-direction: column;
  padding: 8px 0;
  margin-top: 8px;
}

.dropdown-item {
  background: none;
  border: none;
  padding: 11px 18px;
  text-align: left;
  font-size: 1em;
  color: #333;
  cursor: pointer;
  transition: background 0.14s;
}

.dropdown-item:hover {
  background: #ffe7c2;
  color: #d17c13;
}
.profile {
  position: relative;
}

:root {
  --main-bg: #f5f3ee;
  --sidebar-bg: #f5f3ee;
  --card-bg: #fff;
  --text-main: #222;
  --text-secondary: #363636;
  --cart-bg: #fff;
  --modal-bg: #fff;
}

body.dark {
  --main-bg: #19191a;
  --sidebar-bg: #171719;
  --card-bg: #202022;
  --text-main: #eee;
  --text-secondary: #ffd180;
  --cart-bg: #18181a;
  --modal-bg: #232323;
}

/* –ü—Ä–∏–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö */
body {
  background: var(--main-bg);
  color: var(--text-main);
}
.sidebar {
  background: var(--sidebar-bg);
}
.cart, .dish-card, .modal-content {
  background: var(--card-bg);
  color: var(--text-main);
}
.menu-title, .cart-title, .section-title {
  color: var(--text-secondary);
}

/* –¢—É–º–±–ª–µ—Ä */
.theme-toggle-wrap {
  display: flex;
  justify-content: flex-start;
  margin-bottom: 25px;
  margin-right: 0;
  margin-left: 0;
  padding-left: 0;
}

.theme-toggle-label {
  display: flex;
  align-items: center;
  cursor: pointer;
  gap: 5px;
  user-select: none;
}
.theme-toggle-slider {
  width: 40px;
  height: 22px;
  background: #ffd180;
  border-radius: 16px;
  margin: 0 5px;
  position: relative;
  transition: background .2s;
  box-shadow: 0 1px 5px #0001;
}
.theme-toggle-label .theme-toggle-icon {
  font-size: 1.22em;
  transition: filter 0.2s;
}
.theme-toggle-label .moon { opacity: 0.7; }
.theme-toggle-label .sun  { opacity: 1; }
#theme-toggle:checked + .theme-toggle-label .theme-toggle-slider {
  background: #232343;
}
#theme-toggle:checked + .theme-toggle-label .sun { opacity: 0.6; }
#theme-toggle:checked + .theme-toggle-label .moon { opacity: 1; }
/* –ö—Ä—É–≥–ª—ã–π –±–µ–≥—É–Ω–æ–∫ */
.theme-toggle-slider::before {
  content: "";
  display: block;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: #fffde4;
  position: absolute;
  left: 2px; top: 1px;
  box-shadow: 0 1px 5px #0002;
  transition: left 0.23s cubic-bezier(.5,1.6,.6,1);
}
#theme-toggle:checked + .theme-toggle-label .theme-toggle-slider::before {
  left: 18px;
  background: #ffe066;
}

body.dark .sidebar {
  background: #18181b;
  border-right: 1.5px solid #232329;
}
body.dark .menu-title {
  color: #ffe08a;
  font-weight: 700;
}
body.dark .menu-btn {
  background: none;
  color: #ece5d9;
  border-radius: 9px;
  font-weight: 500;
}
body.dark .menu-btn.active,
body.dark .menu-btn:focus {
  background: linear-gradient(90deg, #26262a 60%, #232327 100%);
  color: #ffcf70;
  font-weight: 700;
  box-shadow: 0 2px 10px #2224;
}
body.dark .menu-btn:hover:not(.active) {
  background: #222229;
  color: #ffd36a;
  font-weight: 600;
  transition: background 0.16s, color 0.14s;
}
body.dark #orders-modal .modal-content {
  background: #222227 !important;
  border-radius: 18px;
  box-shadow: 0 4px 36px #0009;
  color: #ffe6ac;
  padding: 24px 18px 18px 18px;
  border: 1.5px solid #232324;
  min-width: 360px;
  max-width: 520px;
}

body.dark #orders-modal .modal-close {
  color: #ffe6ac !important;
}

body.dark #orders-list > div {
  background: #1a1a1e !important;
  border-radius: 14px;
  margin-bottom: 16px;
  box-shadow: 0 2px 10px #0005;
  padding: 18px 20px 12px 18px !important;
  color: #ffe6ac !important;
  transition: box-shadow 0.15s;
}

body.dark #orders-list > div:hover {
  box-shadow: 0 8px 32px #0007;
}

body.dark #orders-list b,
body.dark #orders-list .order-sum,
body.dark #orders-list .order-date {
  color: #ffe08a !important;
  font-weight: 700;
}

body.dark #orders-list span,
body.dark #orders-list .order-address {
  color: #ffdfa6 !important;
  font-weight: 400;
}

body.dark #orders-list img {
  border-radius: 10px;
  background: #23232b;
  border: 1px solid #23232b;
}

/* –°–∫—Ä—ã—Ç—å —Å–ª–∏—à–∫–æ–º —Å–≤–µ—Ç–ª—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
body.dark #orders-list * {
  text-shadow: none !important;
  filter: none !important;
}
body.dark .cart {
  background: #232328 !important;
  color: #ffe6ac !important;
  box-shadow: 0 4px 32px #0009;
  border-radius: 26px;
  border: 1.5px solid #242426;
}

body.dark .cart-title {
  color: #ffe6ac !important;
}

body.dark .cart-item {
  background: #18181d !important;
  border-radius: 8px;
  color: #ffe6ac !important;
  box-shadow: 0 2px 10px #0007;
}

body.dark .cart-item-title {
  color: #ffe6ac !important;
}

body.dark .cart-item-qty {
  color: #ffe6ac !important;
}

body.dark .cart-item-btn {
  background: #31313b !important;
  color: #ffe6ac !important;
  border: 1px solid #363642 !important;
  border-radius: 5px;
  padding: 2px 8px;
  font-size: 1.09em;
  cursor: pointer;
  transition: background 0.12s, color 0.12s;
}
body.dark .cart-item-btn:hover {
  background: #ffcc80 !important;
  color: #232328 !important;
  border-color: #ffcc80 !important;
}

body.dark .cart-total {
  color: #ffe6ac !important;
  text-shadow: 0 2px 6px #0008;
}

body.dark .order-btn {
  background: linear-gradient(90deg, #ffcc80, #ffb74d) !important;
  color: #222 !important;
  font-weight: bold;
  border: none;
  border-radius: 11px;
  box-shadow: 0 1px 10px #0005;
  transition: background 0.18s, color 0.18s;
}
body.dark .order-btn:hover, 
body.dark .order-btn:focus {
  background: linear-gradient(90deg, #ffb74d, #ffcc80) !important;
  color: #d17c13 !important;
}
body.dark .profile-btn {
  background: #232328 !important;
  color: #ffe6ac !important;
  border: none !important;
  box-shadow: 0 2px 10px #0007;
}
body.dark .profile-btn > div {
  background: #d17c13 !important;
  color: #fff !important;
}
body.dark .profile-dropdown {
  background: #232328 !important; /* —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω */
  color: #ffe6ac !important;      /* —Å–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
  box-shadow: 0 4px 16px #0009;
  border: 1.5px solid #242426;
}

body.dark .dropdown-item {
  color: #ffe6ac !important;         /* —Å–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
}

body.dark .dropdown-item:hover {
  background: #35353a !important;    /* —á—É—Ç—å —Å–≤–µ—Ç–ª–µ–µ —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
  color: #ffd36a !important;         /* –∑–æ–ª–æ—Ç–æ–π –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ */
}

  </style>
</head>
<body>
  <div class="layout">
    <!-- –õ–µ–≤–æ–µ –º–µ–Ω—é -->
    <div class="sidebar">
      <!-- 1) –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ -->
<div class="profile">
  <button id="profile-btn" class="profile-btn">–í–æ–π—Ç–∏</button>
  <div id="profile-dropdown" class="profile-dropdown" style="display:none;">
    <button id="my-orders-btn" class="dropdown-item">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
    <button id="logout-btn" class="dropdown-item">–í—ã–π—Ç–∏</button>
  </div>
</div>



<!-- 2) –ú–æ–¥–∞–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="auth-modal" class="modal">
  <div class="modal-content">
    <span id="auth-close" class="modal-close">&times;</span>

    <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
    <form id="login-form" class="auth-form">
  <h2>–í—Ö–æ–¥</h2>
  <input type="text" id="login-identifier" placeholder="–õ–æ–≥–∏–Ω –∏–ª–∏ e-mail" required>
  <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
  <button type="submit">–í–æ–π—Ç–∏</button>
  <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
</form>

    <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é) -->
    <form id="register-form" class="auth-form" style="display:none;">
      <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <input type="email"    id="reg-email"    placeholder="E-mail" required>
      <input type="text"     id="reg-username" placeholder="–õ–æ–≥–∏–Ω"  required>
      <input type="password" id="reg-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      <div id="register-error" style="color: #c0392b; margin: 5px 0 0 2px; font-size: 0.97em; display:none;"></div>
      <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login">–í–æ–π—Ç–∏</a></p>
    </form>
  </div>
</div>
      <div>
        <div class="menu-title">–ú–µ–Ω—é</div>
        <button class="menu-btn active" data-category="all">–í—Å–µ</button>
        <button class="menu-btn" data-category="cold">–•–æ–ª–æ–¥–Ω—ã–µ –±–ª—é–¥–∞</button>
        <button class="menu-btn" data-category="salat">–°–∞–ª–∞—Ç—ã</button>
        <button class="menu-btn" data-category="zakuski">–ó–∞–∫—É—Å–∫–∏</button>
        <button class="menu-btn" data-category="soup">–°—É–ø—ã</button>
        <button class="menu-btn" data-category="hot">–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞</button>
        <!-- –¢—É–º–±–ª–µ—Ä —Ç–µ–º—ã ‚Äî –í –°–ê–ú–û–ú –ù–ò–ó–£ -->
  <div class="theme-toggle-wrap">
    <input type="checkbox" id="theme-toggle" hidden>
    <label for="theme-toggle" class="theme-toggle-label">
      <span class="theme-toggle-icon sun">‚õÖÔ∏è</span>
      <span class="theme-toggle-slider"></span>
      <span class="theme-toggle-icon moon">üåë</span>
    </label>
  </div>
      </div>
    </div>
    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å -->
    <div class="center">
      <div class="banner">
        <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1200&q=80" alt="–ö–æ—Ä–µ–π—Å–∫–∞—è –∫—É—Ö–Ω—è">
        <div class="banner-content">
          <div class="banner-title">MYAU</div>
        </div>
      </div>
      <div class="section-title">–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
      <div class="dishes" id="dish-list"></div>
    </div>
    <!-- –ü—Ä–∞–≤–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
    <div class="cart" id="cart">
      <div class="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</div>
      <div class="cart-items" id="cart-items"></div>
      <div class="cart-empty" id="cart-empty">
        <img src="https://cdn-icons-png.flaticon.com/512/5956/5956593.png" class="cart-empty-img" alt="–ü—É—Å—Ç–æ">
        <div>–í –≤–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω–µ –ø–æ–∫–∞ –ø—É—Å—Ç–æ</div>
      </div>
      <div class="cart-total" id="cart-total"></div>
      <button id="order-btn" class="order-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
    <div id="order-modal" class="order-modal">
      <form id="order-form" class="order-form">
        <div class="order-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</div>
        <input type="text" id="order-name" placeholder="–ò–º—è" required>
        <input type="text" id="order-lastname" placeholder="–§–∞–º–∏–ª–∏—è" required>
        <input type="tel" id="order-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
        <input type="text" id="order-address" placeholder="–ê–¥—Ä–µ—Å" required>
        <button type="submit" class="send-order-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
        <button type="button" id="close-order-modal" class="close-modal-btn">–û—Ç–º–µ–Ω–∞</button>
      </form>
      <div id="order-success" style="display:none;text-align:center;font-size:18px;margin-top:30px;">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</div>
    </div>
    <!-- –ú–û–î–ê–õ–ö–ê –ó–ê–ö–ê–ó–û–í -->
<div id="orders-modal" class="modal" style="display:none;">
  <div class="modal-content" style="min-width:350px;max-width:480px;position:relative;">
    <span id="orders-close" class="modal-close">&times;</span>
    <button id="orders-clear" style="position:absolute;top:14px;right:45px;background:#e74c3c;color:#fff;padding:6px 12px;border:none;border-radius:7px;cursor:pointer;font-size:0.95em;">–û—á–∏—Å—Ç–∏—Ç—å –∑–∞–∫–∞–∑—ã</button>
    <div id="orders-list" style="margin-top:38px;"></div>
  </div>
</div>

  </div>

  <script>
    // –°–ø–∏—Å–æ–∫ –±–ª—é–¥ (–±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
    const dishes = [
      {price: 550, 
        name: '–•–µ–º—É–ª—å—Ç–∞–Ω',
         desc: '–ö–æ—Ä–µ–π—Å–∫–∏–π –æ—Å—Ç—Ä—ã–π —Å—É–ø –∏–∑ –æ–∫—É–Ω—è —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏...',
          weight: '360 –≥',
           img: 'https://koreana.rest/upload/products/%D1%85%D0%B5%D0%BC%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D0%BD[1].webp', 
           category: 'soup'},
      {price: 550,
        name: '–Æ–∫–∫–µ–¥—è–Ω',
         desc: '–ú—è—Å–Ω–æ–π —Å—ã—Ç–Ω—ã–π —Å—É–ø —Å –≥—É—Å—Ç—ã–º –≥–æ–≤—è–∂–∏–º –±—É–ª—å–æ–Ω–æ–º...',
          weight: '360 –≥',
           img: 'https://koreana.rest/upload/products/%D1%8E%D0%BA%D0%BA%D0%B5%D0%B4%D1%8F%D0%BD[1].webp', 
           category: 'soup'},
      {price: 550, 
        name: '–¢–æ–º —è–º',
         desc: '–¢–æ–º –Ø–º ‚Äì —Å–∞–º—ã–π –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –≤ –º–∏—Ä–µ —Å—É–ø –ø–∞–Ω–∞–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏...',
          weight: '360 –≥',
           img: 'https://koreana.rest/upload/products/%D1%82%D0%BE%D0%BC%D1%8F%D0%BC[1].webp', 
           category: 'soup'},
      {price: 590,
         name: '–ö–∏–º—á–∏ –¢–∏–≥–µ',
          desc: '–°–æ—á–µ—Ç–∞–Ω–∏–µ –æ—Å—Ç—Ä–æ–≥–æ –±—É–ª—å–æ–Ω–∞, –º—è—Å–∞, –∫–∏–º—á–∏ –∏ —Ç–æ—Ñ—É...',
           weight: '350 –≥',
            img: 'https://koreana.rest/upload/products/%D0%BA%D0%B8%D0%BC%D1%87%D0%B8%D1%82%D0%B8%D0%B3%D0%B5[1].webp',
             category: 'soup'},
      {price: 620,
         name: '–ö–∏–º—á–∏ –†–∞–º–µ–Ω',
          desc: '–û—Å—Ç—Ä—ã–π –∏ –Ω–µ–∂–Ω—ã–π, —è—Ä–∫–∏–π –∏ —Å–ª–∏–≤–æ—á–Ω—ã–π, –Ω–∞–≤–∞—Ä–∏—Å—Ç—ã–π –≥–æ—Ä—è—á–∏–π —Ä–∞–º–µ–Ω...',
           weight: '380 –≥',
            img: 'https://koreana.rest/upload/products/%D0%BA%D0%B8%D0%BC%D1%87%D0%B8%D1%80%D0%B0%D0%BC%D0%B5%D0%BD[1].webp',
             category: 'soup'},
      {price: 550,
         name: '–¢—è–º–ø–æ–Ω',
          desc: '–û—Å—Ç—Ä—ã–π —Å—É–ø —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –æ–≤–æ—â–∞–º–∏ –∏ –ø—à–µ–Ω–∏—á–Ω–æ–π –ª–∞–ø—à–æ–π...',
           weight: '360 –≥',
            img: 'https://koreana.rest/upload/products/%D1%82%D1%8F%D0%BC%D0%BF%D0%BE%D0%BD[1].webp',
             category: 'soup'},
      {price: 650,
         name: '–¢–∞–Ω—Å—É—é–∫', 
         desc: '–î–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Å–≤–∏–Ω–∏–Ω—ã –≤ –∫–∏—Å–ª–æ-—Å–ª–∞–¥–∫–æ–º —Å–æ—É—Å–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ—Ü–µ–ø—Ç —Å 200-–ª–µ—Ç–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–µ–π...', 
         weight: '330 –≥',
          img: 'https://koreana.rest/upload/products/%D1%82%D0%B0%D0%BD%D1%81%D1%83%D1%8E%D0%BA[1].webp',
          category: 'hot'},
      {price: 650,
         name: '–õ–æ—Å–æ—Å—å –¢–µ—Ä–∏—è–∫–∏',
          desc: '–°–≤–µ–∂–∏–π –∏ —Å–æ—á–Ω—ã–π —Å—Ç–µ–π–∫ –∏–∑ –ª–æ—Å–æ—Å—è...',
           weight: '330 –≥'
           , img: 'https://koreana.rest/upload/products/%D0%BB%D0%BE%D1%81%D0%BE%D1%81%D1%8C%D1%82%D0%B5%D1%80%D0%B8%D1%8F%D0%BA%D0%B8[1].webp',
            category: 'hot'},
      {price: 650, 
        name: '–ß–µ—é–∫ –ü–æ–∫–∫—ã–º',
         desc: '–•–∏—Ç –∫–æ—Ä–µ–π—Å–∫–æ–π –∫—É—Ö–Ω–∏ ‚Äì —á–µ—é–∫ –ø–æ–∫–∫—ã–º...',
          weight: '330 –≥',
           img: 'https://koreana.rest/upload/products/%D1%87%D0%B5%D1%8E%D0%BA%D0%BF%D0%BE%D0%BA%D0%BA%D1%8B%D0%BC%D0%BC[1].webp',
            category: 'hot'},
      {price: 650,
         name: '–ü–æ—Å—Å–∞–º', 
         desc: '–û—Ç–≤–∞—Ä–Ω–∞—è —Å–≤–∏–Ω–∞—è –≥—Ä—É–¥–∏–Ω–∫–∞. –ü–æ–¥–∞–µ—Ç—Å—è —Å —Ñ—Ä–µ—à –∫–∏–º—á–∏...',
          weight: '330 –≥',
          img: 'https://koreana.rest/upload/products/%D0%BF%D0%BE%D1%81%D1%81%D0%B0%D0%BC[1].webp', 
          category: 'hot'},
      {price: 360,
         name: '–û–Ω–∏–≥–∏—Ä–∏ —Å –ª–æ—Å–æ—Å–µ–º',
          desc: '–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –∏–∑ —Ä–∏—Å–∞ —Å –Ω–∞—á–∏–Ω–∫–æ–π –∏–∑ –ª–æ—Å–æ—Å—è...', 
          weight: '130 –≥',
           img: 'https://koreana.rest/upload/products/%D0%BE%D0%BD%D0%B8%D0%B3%D0%B8%D1%80%D0%B8.jpg', 
           category: 'zakuski'},
      {price: 360,
         name: '–°–ª–∏–≤–æ—á–Ω—ã–π –ö–∏–º–ø–∞–±',
          desc: '–í–∫—É—Å, –Ω–∞–ø–æ–º–∏–Ω–∞—é—â–∏–π —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ä–æ–ª–ª—ã: –º—è–≥–∫–∏–π –∫—Ä–µ–º-—Å—ã—Ä...', 
          weight: '130 –≥', 
          img: 'https://koreana.rest/upload/products/%D1%81%D0%BB%D0%B8%D0%B2%D0%BE%D1%87%D0%BD%D1%8B%D0%B9%20%D0%BA%D0%B8%D0%BC%D0%BF%D0%B0%D0%B1.webp', 
          category: 'zakuski'},
      {price: 360,
         name: '–û—Å—Ç—Ä—ã–π —á–∏–∫–∫–µ–Ω',
          desc: '–ù–∞—Å—Ç–æ—è—â–∞—è –∫–æ—Ä–µ–π—Å–∫–∞—è –∫—É—Ä–æ—á–∫–∞ –≤ —è—Ä–∫–æ–º —Å–ª–∞–¥–∫–æ-–æ—Å—Ç—Ä–æ–º —Å–æ—É—Å–µ...', 
          weight: '130 –≥', 
          img: 'https://koreana.rest/upload/products/%D0%BE%D1%81%D1%82%D1%80%D1%8B%D0%B9%20%D1%87%D0%B8%D0%BA%D0%BA%D0%B5%D0%BD.webp',
           category: 'zakuski'},
      {price: 360,
         name: '–ú–µ–¥–æ–≤—ã–π —á–∏–∫–∫–µ–Ω',
          desc: '–•—Ä—É—Å—Ç—è—â–∏–π –∫–æ—Ä–µ–π—Å–∫–∏–π –∫–ª—è—Ä –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–π —Å–æ—á–Ω–æ—Å—Ç—å –∫—É—Ä–∏—Ü—ã...',
           weight: '130 –≥', 
           img: 'https://koreana.rest/upload/products/%D0%BC%D0%B5%D0%B4%D0%BE%D0%B2%D1%8B%D0%B9%20%D1%87%D0%B8%D0%BA%D0%BA%D0%B5%D0%BD.webp', 
           category: 'zakuski'},
      {price: 570,
         name: '–ú—É—ç—Ä', 
         desc: '–û—Å—Ç—Ä–∞—è –∑–∞–∫—É—Å–∫–∞ –∏–∑ —Ñ–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–≤–æ—â–µ–π...',
          weight: '150 –≥',
           img: 'https://koreana.rest/upload/%D0%B1%D0%BB%D0%BE%D0%B3-%D0%BA%D0%BE%D1%80%D0%B5%D0%B9%D1%81%D0%BA%D0%B8%D0%B5-%D1%81%D0%B0%D0%BB%D0%B0%D1%82%D1%8B-5.jpg', 
           category: 'salat'},
      {price: 490,
         name: '–°–æ–µ–≤–∞—è —Å–ø–∞—Ä–∂–∞ –∏–ª–∏ —Ñ—É—á–∂—É',
          desc: '–°–≤–µ–∂–∏–π —Å–∞–ª–∞—Ç –∏–∑ –æ–≥—É—Ä—Ü–æ–≤ —Å –∫—É–Ω–∂—É—Ç–æ–º –∏ —Å–ø–µ—Ü–∏—è–º–∏...', 
          weight: '120 –≥', 
          img: 'https://koreana.rest/upload/%D0%B1%D0%BB%D0%BE%D0%B3-%D0%BA%D0%BE%D1%80%D0%B5%D0%B9%D1%81%D0%BA%D0%B8%D0%B5-%D1%81%D0%B0%D0%BB%D0%B0%D1%82%D1%8B-7.jpg',
           category: 'salat'},
      {price: 520,
         name: '–•–µ', 
         desc: '–û—Å—Ç—Ä–∞—è –º–æ—Ä–∫–æ–≤—å —Å —á–µ—Å–Ω–æ–∫–æ–º –∏ –∫–æ—Ä–∏–∞–Ω–¥—Ä–æ–º...',
          weight: '140 –≥',
           img: 'https://koreana.rest/upload/%D0%B1%D0%BB%D0%BE%D0%B3-%D0%BA%D0%BE%D1%80%D0%B5%D0%B9%D1%81%D0%BA%D0%B8%D0%B5-%D1%81%D0%B0%D0%BB%D0%B0%D1%82%D1%8B-2.jpg', category: 'salat'},
      // –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (default –≤ "–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
      {price: 630,
         name: '–ü–∏–±–∏–º–ø–∞–±',
          desc: '–†–∏—Å —Å –æ–≤–æ—â–∞–º–∏, –º—è—Å–æ–º, —è–π—Ü–æ–º –∏ –æ—Å—Ç—Ä–æ–π –ø–∞—Å—Ç–æ–π –∫–æ—á—É–¥—è–Ω.',
           weight: '350 –≥', 
           img: 'https://lifehacker.ru/wp-content/uploads/2022/10/shutterstock_604838036_1666701568-scaled.jpg'},
      {price: 430,
         name: '–¢—Ç–æ–∫–ø–æ–∫–∫–∏',
          desc: '–†–∏—Å–æ–≤—ã–µ –ø–∞–ª–æ—á–∫–∏ –≤ –ø—Ä—è–Ω–æ–º —Å–æ—É—Å–µ –∫–æ—á—É–¥—è–Ω...',
           weight: '200 –≥',
            img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQF6h9Qavt5Xrmbz_8FZIhWjEjYnkzdfZAwcQ&s'},
      {price: 710,
         name: '–°–∞–º–≥—ë–ø—Å–∞–ª—å',
          desc: '–ñ–∞—Ä–µ–Ω–∞—è —Å–≤–∏–Ω–∏–Ω–∞, –∑–∞–≤—ë—Ä–Ω—É—Ç–∞—è –≤ –ª–∏—Å—Ç—å—è —Å–∞–ª–∞—Ç–∞ —Å —Å–æ—É—Å–æ–º...',
           weight: '250 –≥',
            img: 'https://shilla.su/wp-content/uploads/2019/06/Samgepsal.jpg'},
      {price: 390,
         name: '–ö–∏–º–±–∞–ø',
          desc: '–†–∏—Å –∏ –æ–≤–æ—â–∏, –∑–∞–≤–µ—Ä–Ω—É—Ç—ã–µ –≤ –≤–æ–¥–æ—Ä–æ—Å–ª–∏. –ö–æ—Ä–µ–π—Å–∫–∏–π ‚Äú—Ä–æ–ª–ª‚Äù.',
           weight: '220 –≥',
            img: 'https://vkusvill.ru/upload/resize/1209305/roll-kimbap_588x409x90_c.webp'},
      {price: 530,
         name: '–°—É–Ω–¥—É–±—É-—á–∏–≥–µ',
          desc: '–û—Å—Ç—Ä—ã–π —Å—É–ø —Å –º—è–≥–∫–∏–º —Ç–æ—Ñ—É, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ —è–π—Ü–æ–º.', 
          weight: '300 –≥',
         img: 'https://avatars.mds.yandex.net/i?id=13fccb70fc1b5e6c583e20a7a497df65_l-8199228-images-thumbs&n=13'},
      {price: 670,
         name: '–ü—É–ª—å–∫–æ–≥–∏', 
         desc: '–¢–æ–Ω–∫–æ –Ω–∞—Ä–µ–∑–∞–Ω–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω–∞—è –∏ –æ–±–∂–∞—Ä–µ–Ω–Ω–∞—è —Å –æ–≤–æ—â–∞–º–∏.',
          weight: '270 –≥', 
          img: 'https://koreana.rest/upload/article/%D0%9F%D1%83%D0%BB%D1%8C%D0%BA%D0%BE%D0%B3%D0%B8%20%D0%B2%20%D0%A1%D0%9F%D0%91.%20%D0%9A%D0%BE%D1%80%D0%B5%D0%B9%D1%81%D0%BA%D0%B8%D0%B9%20%D1%80%D0%B5%D1%81%D1%82%D0%BE%D1%80%D0%B0%D0%BD%20%D0%9A%D0%BE%D1%80%D0%B5%D0%B0%D0%BD%D0%B0.jpg'},
      {price: 610,
         name: '–ß–∞–ø—á—Ö–µ', 
         desc: '–õ–∞–ø—à–∞ –∏–∑ –±–∞—Ç–∞—Ç–∞ —Å –æ–≤–æ—â–∞–º–∏ –∏ –º—è—Å–æ–º, –∑–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫—É–Ω–∂—É—Ç–Ω—ã–º –º–∞—Å–ª–æ–º.', 
         weight: '320 –≥', img: 'https://img.iamcook.ru/old/upl/recipes/cat/u6009-3fc1b78c03fc2e51b4beb38a4aff673c.jpg'},
      {price: 480,
         name: '–•–æ–¥–¥–æ–∫',
          desc: '–ñ–∞—Ä–µ–Ω–∞—è —Å–ª–∞–¥–∫–∞—è –ª–µ–ø—ë—à–∫–∞ —Å –∫–∞—Ä–∞–º–µ–ª—å–Ω–æ–π –Ω–∞—á–∏–Ω–∫–æ–π –∏ –æ—Ä–µ—Ö–∞–º–∏.', 
          weight: '120 –≥',
           img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTOLiQAOtR3X-ojJCoYQOY-GD3B5Wx_RdbGkg&s'},
      {price: 490,
         name: '–ö—É–∫—Å—É', 
         desc: '–õ—ë–≥–∫–∏–π —Ö–æ–ª–æ–¥–Ω—ã–π —Å—É–ø —Å –ª–∞–ø—à–æ–π –∏ –æ–≤–æ—â–∞–º–∏. –û—Å–≤–µ–∂–∞–µ—Ç –≤ –∂–∞—Ä—É!',
          weight: '340 –≥',
           img: 'https://koreana.rest/upload/blog/%D0%BA%D1%83%D0%BA%D1%81%D0%B8-%D1%80%D0%B5%D1%86%D0%B5%D0%BF%D1%82.jpg',
            category: 'cold'},
      {price: 570,
         name: '–ö–∏–º—á–∏',
          desc: '–û—Å—Ç—Ä–∞—è –∑–∞–∫—É—Å–∫–∞ –∏–∑ —Ñ–µ—Ä–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–≤–æ—â–µ–π...', 
          weight: '150 –≥',
           img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4h2ZMWQ-BW5Zs5-yyTXX0-fQFEEms7139sA&s', 
           category: 'cold'}
    ];
let cart = [];

// --- DOM-—ç–ª–µ–º–µ–Ω—Ç—ã ---
const dishList      = document.getElementById('dish-list');
const sectionTitle  = document.querySelector('.section-title');
const profileBtn    = document.getElementById('profile-btn'); // –í–ï–†–ù–û!
const authModal     = document.getElementById('auth-modal');
const authClose     = document.getElementById('auth-close');
const loginForm     = document.getElementById('login-form');
const registerForm  = document.getElementById('register-form');
const showRegister  = document.getElementById('show-register');
const showLogin     = document.getElementById('show-login');
const profileDropdown = document.getElementById('profile-dropdown');
const logoutBtn = document.getElementById('logout-btn');
const myOrdersBtn = document.getElementById('my-orders-btn');


// --- –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω) ---
profileBtn.addEventListener('click', () => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (!user || !user.username) {
    authModal.style.display = 'flex';
    loginForm.style.display = '';
    registerForm.style.display = 'none';
  }
});

// --- –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É ---
authClose.addEventListener('click', () => authModal.style.display = 'none');
authModal.addEventListener('click', e => {
  if (e.target === authModal) authModal.style.display = 'none';
});

// --- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é ---
showRegister.addEventListener('click', e => {
  e.preventDefault();
  loginForm.style.display    = 'none';
  registerForm.style.display = '';
});
// --- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ª–æ–≥–∏–Ω ---
showLogin.addEventListener('click', e => {
  e.preventDefault();
  registerForm.style.display = 'none';
  loginForm.style.display    = '';
});

// --- –õ–û–ì–ò–ù ---
loginForm.addEventListener('submit', async e => {
  e.preventDefault();
  const identifier = document.getElementById('login-identifier').value;
  const password = document.getElementById('login-password').value;

  try {
    const res = await fetch('/api/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ identifier, password }) // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–¥–Ω–æ –ø–æ–ª–µ
    });
    const data = await res.json();
    if (!res.ok) throw new Error(data.error || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞');

    localStorage.setItem('user', JSON.stringify(data.user));
    updateProfileButton(data.user.username);
    authModal.style.display = 'none';
  } catch (err) {
    alert(err.message);
  }
});


// --- –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø ---
registerForm.addEventListener('submit', async e => {
  e.preventDefault();
  const email    = document.getElementById('reg-email').value;
  const username = document.getElementById('reg-username').value;
  const password = document.getElementById('reg-password').value;

  try {
    const res = await fetch('/api/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, username, password })
    });
    const data = await res.json();
    if (!res.ok) throw new Error(data.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');

    localStorage.setItem('user', JSON.stringify(data.user));
    updateProfileButton(data.user.username);
    authModal.style.display = 'none';
  } catch (err) {
    alert(err.message);
  }
});

// --- –†–µ–Ω–¥–µ—Ä –±–ª—é–¥ ---
function renderDishes(category = 'all') {
  dishList.innerHTML = '';
  dishes
    .map((dish, idx) => ({ ...dish, origIdx: idx }))
    .filter(dish => category === 'all' || dish.category === category)
    .forEach((dish) => {
      const card = document.createElement('div');
      card.className = 'dish-card';
      card.innerHTML = `
        <img src="${dish.img}" class="dish-img" alt="${dish.name}">
        <div class="dish-content">
          <div class="dish-price">${dish.price}‚ÇΩ</div>
          <div class="dish-title" title="${dish.name}">${dish.name}</div>
          <div class="dish-desc">${dish.desc}</div>
          <div class="dish-weight">${dish.weight}</div>
        </div>
        <button class="add-btn" data-idx="${dish.origIdx}"><span>+</span> –î–æ–±–∞–≤–∏—Ç—å</button>
      `;
      dishList.appendChild(card);
    });
}
renderDishes('all');

// --- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π ---
document.querySelectorAll('.menu-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const category = btn.getAttribute('data-category');
    renderDishes(category);
    let titles = {
      'all': '–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
      'cold': '–•–æ–ª–æ–¥–Ω—ã–µ –±–ª—é–¥–∞',
      'salat': '–°–∞–ª–∞—Ç—ã',
      'zakuski': '–ó–∞–∫—É—Å–∫–∏',
      'soup': '–°—É–ø—ã',
      'hot': '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞'
    };
    sectionTitle.textContent = titles[category] || '–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π';
  });
});

// --- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É ---
dishList.addEventListener('click', function(e) {
  if (e.target.closest('.add-btn')) {
    const idx = e.target.closest('.add-btn').dataset.idx;
    const dish = dishes[idx];
    const found = cart.find(item => item.name === dish.name);
    if (found) {
      found.qty++;
    } else {
      cart.push({ name: dish.name, price: dish.price, qty: 1 });
    }
    updateCart();
  }
});

// --- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã ---
function updateCart() {
  const cartItems = document.getElementById('cart-items');
  const cartTotal = document.getElementById('cart-total');
  const cartEmpty = document.getElementById('cart-empty');
  cartItems.innerHTML = '';
  let total = 0;
  if (cart.length === 0) {
    cartEmpty.style.display = '';
    cartTotal.textContent = '';
    return;
  } else {
    cartEmpty.style.display = 'none';
  }
  cart.forEach((item, i) => {
    total += item.price * item.qty;
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `
      <span class="cart-item-title">${item.name}</span>
      <div class="cart-item-controls">
        <button class="cart-item-btn minus" data-idx="${i}">‚Äì</button>
        <span class="cart-item-qty">${item.qty} x ${item.price}‚ÇΩ</span>
        <button class="cart-item-btn plus" data-idx="${i}">+</button>
      </div>
    `;
    cartItems.appendChild(div);
  });
  cartTotal.textContent = `–ò—Ç–æ–≥–æ: ${total}‚ÇΩ`;
}

// --- –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫–∞–∑–∞ ---
const orderBtn     = document.getElementById('order-btn');
const orderModal   = document.getElementById('order-modal');
const closeModalBtn= document.getElementById('close-order-modal');
const orderForm    = document.getElementById('order-form');
const thanksMsg    = document.getElementById('order-success');

orderBtn.addEventListener('click', () => {
  if (cart.length === 0) return;
  orderModal.style.display = 'flex';
  thanksMsg.style.display = 'none';
  orderForm.style.display = '';
});
closeModalBtn.addEventListener('click', () => {
  orderModal.style.display = 'none';
});
orderForm.addEventListener('submit', async function(e) {
  e.preventDefault();
  const name = document.getElementById('order-name').value;
  const lastname = document.getElementById('order-lastname').value;
  const phone = document.getElementById('order-phone').value;
  const address = document.getElementById('order-address').value;
  const user = JSON.parse(localStorage.getItem('user'));
  if (!user || !user.id) {
    alert("–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞");
    return;
  }
  try {
    const res = await fetch('/api/orders', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        userId: user.id,
        cart: cart,
        name, lastname, phone, address
      })
    });
    const data = await res.json();
    if (!res.ok) throw new Error(data.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞');
    orderForm.style.display = 'none';
    thanksMsg.style.display = '';
    cart = [];
    updateCart();
    setTimeout(() => {
      orderModal.style.display = 'none';
      orderForm.reset();
      orderForm.style.display = '';
    }, 2000);
  } catch (err) {
    alert(err.message);
  }
});

// --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ + –∏ ‚Äì –≤ –∫–æ—Ä–∑–∏–Ω–µ ---
document.getElementById('cart-items').addEventListener('click', function(e) {
  if (e.target.classList.contains('plus')) {
    const idx = +e.target.dataset.idx;
    cart[idx].qty++;
    updateCart();
  }
  if (e.target.classList.contains('minus')) {
    const idx = +e.target.dataset.idx;
    cart[idx].qty--;
    if (cart[idx].qty <= 0) {
      cart.splice(idx, 1);
    }
    updateCart();
  }
});

// --- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è (–∏–Ω–∏—Ü–∏–∞–ª/–í–æ–π—Ç–∏) ---
function updateProfileButton(username) {
  if (username) {
    const firstLetter = username.charAt(0).toUpperCase();
    profileBtn.innerHTML = `<div style="
      width:32px; height:32px;
      background:#d17c13; 
      border-radius:50%;
      display:flex; 
      align-items:center; 
      justify-content:center;
      font-weight:bold;
      color:#fff;
      font-size:1em;
    ">${firstLetter}</div>`;
  } else {
    profileBtn.textContent = '–í–æ–π—Ç–∏';
  }
}

// --- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
window.addEventListener('DOMContentLoaded', () => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (user && user.username) {
    updateProfileButton(user.username);
  } else {
    updateProfileButton(null);
  }
});

// –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä–æ–ø–¥–∞—É–Ω–∞
profileBtn.addEventListener('click', (e) => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (user && user.username) {
    profileDropdown.style.display = profileDropdown.style.display === 'none' ? 'flex' : 'none';
    e.stopPropagation();
  }
  // –∏–Ω–∞—á–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ (—ç—Ç–∞ –ª–æ–≥–∏–∫–∞ —É–∂–µ –≤—ã—à–µ)
});

// –ö–ª–∏–∫ –≤–Ω–µ –º–µ–Ω—é ‚Äî —Å–∫—Ä—ã—Ç—å –¥—Ä–æ–ø–¥–∞—É–Ω
document.addEventListener('click', (e) => {
  if (!profileDropdown.contains(e.target) && e.target !== profileBtn) {
    profileDropdown.style.display = 'none';
  }
});

// –í—ã–π—Ç–∏
logoutBtn.addEventListener('click', () => {
  localStorage.removeItem('user');
  window.location.reload();
});


const registerError = document.getElementById('register-error');
registerForm.addEventListener('submit', async e => {
  e.preventDefault();
  registerError.style.display = 'none'; // —Å–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—É—é –æ—à–∏–±–∫—É
  const email    = document.getElementById('reg-email').value;
  const username = document.getElementById('reg-username').value;
  const password = document.getElementById('reg-password').value;

  try {
    const res = await fetch('/api/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, username, password })
    });
    const data = await res.json();
    if (!res.ok) throw new Error(data.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏');
    localStorage.setItem('user', JSON.stringify(data.user));
    updateProfileButton(data.user.username);
    authModal.style.display = 'none';
  } catch (err) {
    registerError.textContent = err.message;
    registerError.style.display = '';
  }
});

// --- –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---
const ordersModal = document.getElementById('orders-modal');
const ordersClose = document.getElementById('orders-close');
const ordersList = document.getElementById('orders-list');
const ordersClear = document.getElementById('orders-clear');

// –û—Ç–∫—Ä—ã—Ç—å "–ú–æ–∏ –∑–∞–∫–∞–∑—ã"
myOrdersBtn.addEventListener('click', async () => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (!user || !user.id) {
    alert("–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç");
    return;
  }
  await loadOrders(user.id);        // –≥—Ä—É–∑–∏–º –∑–∞–∫–∞–∑—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
  ordersModal.style.display = 'flex';
  profileDropdown.style.display = 'none'; // –ø—Ä—è—á–µ–º –¥—Ä–æ–ø–¥–∞—É–Ω –ø—Ä–æ—Ñ–∏–ª—è
});

// –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É
ordersClose.addEventListener('click', () => {
  ordersModal.style.display = 'none';
});
ordersModal.addEventListener('click', e => {
  if (e.target === ordersModal) ordersModal.style.display = 'none';
});

// –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–∫–∞–∑—ã
ordersClear.addEventListener('click', async () => {
  const user = JSON.parse(localStorage.getItem('user'));
  if (!user || !user.id) return;
  await fetch(`/api/orders`, {
    method: 'DELETE',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ userId: user.id })
  });
  await loadOrders(user.id);
});

// –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤
async function loadOrders(userId) {
  ordersList.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
  try {
    const res = await fetch(`/api/orders?userId=${userId}`);
    const orders = await res.json();
    if (!res.ok) throw new Error(orders.error || '–û—à–∏–±–∫–∞');
    if (!orders || !orders.length) {
      ordersList.innerHTML = '<div style="color:#888;text-align:center;padding:30px 0 15px">–ü–æ–∫–∞ —á—Ç–æ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</div>';
      return;
    }
    // –†–µ–Ω–¥–µ—Ä–∏–º –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑
    ordersList.innerHTML = orders.map(order => {
      const items = order.order_data || [];
      const renderedItems = items.map(item => {
        const dish = dishes.find(d => d.name === item.name);
        return `
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
            <img src="${dish ? dish.img : ''}" alt="${item.name}" style="width:45px;height:45px;border-radius:10px;object-fit:cover;">
            <div>
              <b>${item.name}</b><br>
              <span style="font-size:0.95em;">${item.qty} x ${item.price}‚ÇΩ</span>
            </div>
          </div>
        `;
      }).join('');
      // –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞
      const total = items.reduce((sum, item) => sum + (item.qty * item.price), 0);
      return `
        <div style="background:#faf9f7;padding:15px 18px;margin-bottom:16px;border-radius:13px;box-shadow:0 2px 10px #0001;">
          <div style="font-weight:600;margin-bottom:6px;">
            ${order.name} ${order.lastname} | ${order.phone}<br>
            <span style="font-weight:400;color:#555;">${order.address}</span>
          </div>
          ${renderedItems}
          <div style="margin-top:10px;font-weight:bold;">–°—É–º–º–∞: ${total}‚ÇΩ</div>
          <div style="color:#aaa;font-size:0.93em;">${new Date(order.created_at).toLocaleString()}</div>
        </div>
      `;
    }).join('');
  } catch (err) {
    ordersList.innerHTML = `<span style="color:red;">${err.message}</span>`;
  }
}

// --- –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ ---
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage
const themeToggle = document.getElementById('theme-toggle');
function applyTheme(dark) {
  if (dark) {
    document.body.classList.add('dark');
    themeToggle.checked = true;
  } else {
    document.body.classList.remove('dark');
    themeToggle.checked = false;
  }
  localStorage.setItem('theme', dark ? 'dark' : 'light');
}

// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É
window.addEventListener('DOMContentLoaded', () => {
  const savedTheme = localStorage.getItem('theme');
  applyTheme(savedTheme === 'dark');
  // –æ—Å—Ç–∞–ª—å–Ω–æ–µ...
});

// –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
themeToggle.addEventListener('change', (e) => {
  applyTheme(e.target.checked);
});


  </script>
</body>
</html>

  </script>
</body>
</html>
